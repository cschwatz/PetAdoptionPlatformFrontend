<div class="events-container">
  <header class="events-header">
    <h1>📅 Eventos e Atividades de ONGs</h1>
    <p>Descubra eventos e atividades organizados por ONGs de resgate animal que estão por vir!</p>
  </header>

  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Carregando eventos...</p>
  </div>

  <div *ngIf="error && !loading" class="error-container">
    <h3>⚠️ Opa! Algum animal está brincando com os fios!</h3>
    <p>{{ error }}</p>
    <button (click)="loadEvents()" class="retry-btn">Tente Novamente</button>
  </div>

  <div *ngIf="!loading && !error" class="events-section">
    <div class="filters-section">
      <div class="filter-group">
        <label for="eventTypeFilter">Filtre por tipo de evento:</label>
        <select id="eventTypeFilter" [value]="selectedEventType" (change)="onEventTypeChange($event)" class="filter-select">
          <option value="">Todos</option>
          <option value="ADOPTION_FAIR">Feiras de adoção</option>
          <option value="FUNDRAISING">Angariamento de fundos</option>
          <option value="AWARENESS_CAMPAIGN">Campanhas de conscientização</option>
          <option value="VETERINARY_CLINIC">Clínicas veterinárias</option>
          <option value="VOLUNTEER_MEETING">Encontro de voluntários</option>
          <option value="OTHER">Outros</option>
        </select>
      </div>
     
      <div class="filter-group">
        <label for="timeFilter">Filtrar por data:</label>
        <select id="timeFilter" [value]="selectedTimeFilter" (change)="onTimeFilterChange($event)" class="filter-select">
          <option value="all">Todos</option>
          <option value="em breve">Eventos futuros</option>
          <option value="encerrado">Eventos encerrados</option>
        </select>
      </div>
    </div>

    <div class="events-count">
      <span>{{ filteredEvents.length }} {{ filteredEvents.length === 1 ? 'evento' : 'eventos' }} found</span>
    </div>

    <div class="events-grid" *ngIf="filteredEvents.length > 0">
      <div class="event-card" *ngFor="let event of filteredEvents; trackBy: trackByEventId">
       
        <div class="card-header">
          <div class="event-icon">{{ getEventIcon(event.eventType) }}</div>
          <div class="event-info">
            <h3 class="event-name">{{ event.name }}</h3>
            <span class="event-type-badge" [ngClass]="'type-' + event.eventType.toLowerCase()">
              {{ getEventTypeLabel(event.eventType) }}
            </span>
          </div>
          <div class="event-status" [ngClass]="getEventStatus(event)">
            {{ getEventStatusLabel(event) }}
          </div>
        </div>
       
        <div class="card-content">
          <div class="event-details">
            <div class="detail-row">
              <span class="detail-icon">📅</span>
              <div class="detail-content">
                <div class="detail-label">Data de início</div>
                <div class="detail-value">{{ formatDateTime(event.startDate) }}</div>
              </div>
            </div>
           
            <div class="detail-row">
              <span class="detail-icon">🏁</span>
              <div class="detail-content">
                <div class="detail-label">Data de encerramento</div>
                <div class="detail-value">{{ formatDateTime(event.endDate) }}</div>
              </div>
            </div>
           
            <div class="detail-row" *ngIf="event.address">
              <span class="detail-icon">📍</span>
              <div class="detail-content">
                <div class="detail-label">Localização</div>
                <div class="detail-value">{{ getAddressString(event.address) }}</div>
              </div>
            </div>
           
            <div class="detail-row" *ngIf="event.ong">
              <span class="detail-icon">🏢</span>
              <div class="detail-content">
                <div class="detail-label">Organizado por</div>
                <div class="detail-value">{{ event.ong.name }}</div>
              </div>
            </div>
          </div>

          <div class="card-footer">
            <button class="action-btn primary" (click)="viewEventDetails(event)" *ngIf="!isPastEvent(event)">
              📋 Ver detalhes
            </button>
            <button class="action-btn secondary" (click)="contactOrganizer(event)" *ngIf="event.ong">
              📞 Contatar Organização
            </button>
            <button class="action-btn tertiary" (click)="shareEvent(event)">
              📤 Compartilhar
            </button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="filteredEvents.length === 0 && !loading" class="empty-state">
      <div class="empty-icon">📅</div>
      <h3>No events found</h3>
      <p *ngIf="selectedEventType || selectedTimeFilter !== 'all'">
        Tente ajustar o seu filtro para ver mais eventos.
      </p>
      <p *ngIf="!selectedEventType && selectedTimeFilter === 'all'">
        Atualmente não há eventos organizados no nosso sistema.
      </p>
      <button (click)="clearFilters()" class="clear-filters-btn" *ngIf="selectedEventType || selectedTimeFilter !== 'all'">
        Limpar 
      </button>
    </div>
  </div>
</div>